## 信息就是位+上下文
- 源程序实际上就是一个由值0和1组成的位序列，8个位被组织成一组，称为字节。每个字节表示程序中的某些文本字符。
- 只有ASCII字符构成的文件称为文本文件，所有其他的文件称为二进制文件。
- 系统中的所有信息——包括磁盘文件、内存中的程序，内存中存放的用户数据以及网络上传送的数据，都是由一串比特表示的。区分不同数据对象的唯一方法是我们读到这些数据对象时的上下文。
## 程序被其他程序翻译成不同的格式

- GCC编译器驱动程序读取源程序文件hello.c并把它翻译成一个可执行文件hello。这个翻译过程可分为四个阶段完成，执行这四个阶段的程序（预处理器、编译器、汇编器、链接器）一起构建了编译系

![](https://cdn.nlark.com/yuque/0/2022/jpeg/25780654/1662794355245-6e3cbf70-e8cf-45f5-a465-42b4e2e7f575.jpeg)

- 预处理阶段：预处理器(cpp)根据以字符#开头的命令，修改原始的C程序，通常这个C程序时以.i作为文件扩展名
- 编译阶段：编译器(ccl)将文本文件hello.i翻译成文本文件hello.s，它包含一个汇编语言程序。汇编语言是非常有用的，**因为它为不同高级语言的不同编译器提供了通用的输出语言。**
- 汇编阶段：接下来，汇编器(as)将hello.s翻译成机器语言指令，把这些指令打包成一种叫做可重定位目标程序的格式，并将结果保存在hello.o中，hello.o文件是一个二进制文件，如果我们在文本编辑器中打开hello.o文件，将会看到一堆乱码
- 链接阶段：hello程序调用了printf函数，它是每个C编译器都提供的标准C库中的一个函数。printf函数存在与一个名为printf.o的单独的预编译好了的目标文件中，而这个文件必须以某种方式合并到我们的hello.o程序中，链接器(ld)就负责处理这种合并，结果就得到hello文件，它是一个可执行目标文件（或者简称为可执行文件），可以被加载到内存中，由系统运行。
## 系统的硬件组成

1. 总线
   1. 贯穿整个系统的是一组电子管道，称作总线，它携带信息字节并负责在各个部件间传递。
2. I/O设备
   1. I/O(输入/输出)设备时系统与外部世界的联系通道。
3. 主存
   1. 主存是一个临时存储设备，在处理执行程序的时，用来存放程序和程序处理的数据。
4. 处理器
   1. 处理器是解释（或执行）存储在主存中指令的引擎。
## 操作系统管理硬件

- 所有应用程序对硬件的操作尝试都必须通过操作系统
- 操作系统有两个基本功能：
   1. 防止硬件被失控的应用程序滥用
   2. 向应用程序提供简单一致的机制来控制复杂而又通常大不相同的低级硬件设备
- 进程是操作系统对一个正在运行的程序的一种抽象，是计算机科学中最重要和最成功的概念之一。
- 一个CPU看上去都像是在并发地执行多个进程，这是通过处理器在进程间来回切换实现的，操作系统实现这种交错执行的机制称为上下文切换。
- 一个进程实际上可以又多个称为线程的执行单元组成，每个线程都运行在进程的上下文中，并共享同样的代码和全局数据。
- 虚拟内存是一个抽象概念，它为每个进程都提供了一个假象，即每个进程都在独占地使用主存。每个进程看到的内存都是一致的，称为虚拟内存空间。
- 虚拟内存的基本思想是把一个进程虚拟内存的内容存储在磁盘上，然后用主存作为磁盘的高速缓存。
- 文件就是字节序列，仅此而已。每个I/O设备，包括磁盘、键盘、显示器，甚至网络，都可以看成是文件。
## 重要主题

- 系统是硬件和系统软件互相交织的集合体，它们必须共同协作以达到运行应用程序的最终目的。
### Amdahl定律

- 若系统执行某应用程序需要时间为Told。假设系统某部分所需执行时间与该时间的比例为α，而该部分性能提升比例为k。即该部分初始所需时间为αTold ，现在所需时间为(αTold)/k，因此总执行时间应为：

Tnew = Told[(1-α)+α/k]
### 并发和并行

- 并发是一个通用的概念，指一个同时具有多种活动的系统。
- 并行指的是用并发来使一个系统运行得更快。
- 传统意义上，这种并发执行只是模拟出来的，是通过使一台计算机在它执行的进程间快速切换来实现的。
- 超线程（也称为同时多线程），是一项允许一个CPU执行多个控制流的技术，它设计CPU某些硬件有多个备份，比如程序计数器和寄存器文件，而其他的硬件部分只有一份，比如执行浮点算术运算的单元。
- 如果处理器可以达到比一个周期一条指令更快的执行速率，就称之为**超标量**。
- 在最低层次上，许多现代处理器拥有特殊的硬件，允许一条指令产生多个可以并行执行的操作，这种方式称为单指令、多数据，即SIMD并行。
### 计算机系统中抽象的重要性

- 文件时对I/O设备的抽象。
- 虚拟内存是对程序存储器的抽象。
- 虚拟机是对整个计算机的抽象
## 小结

- **计算机系统是由硬件和系统软件组成的。他们共同协作以运行应用程序。计算机内部的信息被表示为一组组的位，它们根据上下文有不同的解释方式。程序被其他程序翻译成不同的形式，开始时是ASCII文本，然后被编译器和链接器翻译成二进制可执行文件。**
- **处理器读取并解释存放在主存里的二进制指令。因为计算机花费了大量的时间在内存、I/O设备和CPU寄存器之间复制数据，所以将系统中的存储设备划分成层次结构——CPU寄存器在顶部，接着是多层的硬件高速缓存存储器、DRAM主存和磁盘存储器。在层次模型中，位于更高层的存储设备比底层的存储设备要更快，单位比特造假也更高。层次结构中较高层次的存储设备可以作为较低层次设备的高速缓存。通过理解和运用这种存储层次结构的知识，程序员可以优化C程序的性能。**
- **操作系统内核是应用程序和硬件之间的媒介，它提供了三个基本的抽象：**
   - **文件时对I/O设备的抽象。**
   - **虚拟内存是对主存和磁盘的抽象。**
   - **进程时处理器、主存和I/O设备的抽象。**
- **网络提供了计算机系统之间通信的手段，从特殊系统的角度来看，网络就是一种I/O设备**
